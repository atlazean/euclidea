\documentclass[tikz,border=10pt]{article}
\usepackage{tikz}

\input{../references/tikzlibrarymc-v1.0.code.tex}

\begin{document}

\tikzmath{
  print{Determinant calculation using Gaussian elimination:\\};
  \d = det3(7,5,3,
            2,1,6,
            1,2,3);
  print{n=3: det = \d \\};
  % n = 4
  \a{1,1} = 2; \a{1,2} = 1; \a{1,3} = 7; \a{1,4} = -1; 
  \a{2,1} = -1; \a{2,2} = 2; \a{2,3} = 4; \a{2,4} = 3; 
  \a{3,1} = 2; \a{3,2} = 1; \a{3,3} = 0; \a{3,4} = -1; 
  \a{4,1} = 3; \a{4,2} = 2; \a{4,3} = 2; \a{4,4} = 1;
  show(4,4);
  \d = det(4);
  print{n=4: det = \d \\};%-70
  % n = 4
  \a{1,1} = 1; \a{1,2} = 7; \a{1,3} = 2; \a{1,4} = 4; 
  \a{2,1} = 1; \a{2,2} = 5; \a{2,3} = 2; \a{2,4} = 4; 
  \a{3,1} = 3; \a{3,2} = 0; \a{3,3} = 1; \a{3,4} = 0; 
  \a{4,1} = 2; \a{4,2} = 1; \a{4,3} = 5; \a{4,4} = -3;
  show(4,4);
  \d = det(4);
  print{n=4: det = \d \\};%-134
  % n = 5
  \a{1,1} = 4; \a{1,2} = 0; \a{1,3} = -7; \a{1,4} = 3; \a{1,5} = -5;
  \a{2,1} = 0; \a{2,2} = 0; \a{2,3} = 2; \a{2,4} = 0; \a{2,5} = 0; 
  \a{3,1} = 7; \a{3,2} = 3; \a{3,3} = -6; \a{3,4} = 4; \a{3,5} = -8; 
  \a{4,1} = 5; \a{4,2} = 0; \a{4,3} = 5; \a{4,4} = 2; \a{4,5} = -3;
  \a{5,1} = 0; \a{5,2} = 0; \a{5,3} = 9; \a{5,4} = -1; \a{5,5} = 2;
  show(5,5);
  \d = det(5);
  print{n=5: det = \d \\};%6
  print{Compute the minor and cofactor:\\};
  \a{1,1} = 7; \a{1,2} = 5; \a{1,3} = 3;
  \a{2,1} = 2; \a{2,2} = 1; \a{2,3} = 6; 
  \a{3,1} = 1; \a{3,2} = 2; \a{3,3} = 3;
  show(3,3);
  int \i,\j;
  \i = 2; \j = 1;
  \d = det(3);
  print{n=3: det = \d \\};
  % for \i in {1,2,3} {
    \m = minor(3,\i,\j);
    \c = cofactor(3,\i,\j);
    print{minor[\i,\j] = \m \\cofator[\i,\j] = \c \\};
  % };
  % 计算经过三点的圆
  % A(x^2+y^2)+Bx+Cy+D=0
  % (1,0), (0,1), (-1,0)
  function squaresum(\x,\y) {
    return (\x)^2+(\y)^2;%可能为负 注意加括号
  };
  \x1 = 1;  \y1 = 0;
  \x2 = 0;  \y2 = 1;
  \x3 = 2;  \y3 = 1;
  % 第一行是 placeholder
  \a{1,1} = 0.0;                \a{1,2} = 0.0; \a{1,3} = 0.0; \a{1,4} = 0.0;
  \a{2,1} = squaresum(\x1,\y1); \a{2,2} = \x1; \a{2,3} = \y1; \a{2,4} = 1.0;
  \a{3,1} = squaresum(\x2,\y2); \a{3,2} = \x2; \a{3,3} = \y2; \a{3,4} = 1.0;
  \a{4,1} = squaresum(\x3,\y3); \a{4,2} = \x3; \a{4,3} = \y3; \a{4,4} = 1.0;
  \A = cofactor(4,1,1);
  \B = cofactor(4,1,2);
  \C = cofactor(4,1,3);
  \D = cofactor(4,1,4);
  \B = \B / \A;
  \C = \C / \A;
  \D = \D / \A;
  \A = 1.0;
  show(4,4);
  print{the circle through (\x1,\y1),(\x2,\y2),(\x3,\y3) is:\\$A(x^2+y^2)+Bx+Cy+D=0$, \\wherein\\ A = \A, B = \B, C = \C, D = \D\\};
  % 计算经过五点的圆锥曲线
  % Ax^2+Bxy+Cy^2+Dx+Ey+F=0
  \x1 = 0;  \y1 = 2;
  \x2 = 3;  \y2 = 1;
  \x3 = 2;  \y3 = -2;
  \x4 = -2;  \y4 = -1;
  \x5 = -2;  \y5 = 1;
  % 第一行是 placeholder
  % \a{1,1} = 0.0;     \a{1,2} = 0.0;     \a{1,3} = 0.0;     \a{1,4} = 0.0; \a{1,5} = 1.0; \a{1,6} = 1.0;
  % \a{2,1} = (\x1)^2; \a{2,2} = \x1*\y1; \a{2,3} = (\y1)^2; \a{2,4} = \x1; \a{2,5} = \y1; \a{2,6} = 1.0; 
  % \a{3,1} = (\x2)^2; \a{3,2} = \x2*\y2; \a{3,3} = (\y2)^2; \a{3,4} = \x2; \a{3,5} = \y2; \a{3,6} = 1.0; 
  % \a{4,1} = (\x3)^2; \a{4,2} = \x3*\y3; \a{4,3} = (\y3)^2; \a{4,4} = \x3; \a{4,5} = \y3; \a{4,6} = 1.0; 
  % \a{5,1} = (\x4)^2; \a{5,2} = \x4*\y4; \a{5,3} = (\y4)^2; \a{5,4} = \x4; \a{5,5} = \y4; \a{5,6} = 1.0; 
  % \a{6,1} = (\x5)^2; \a{6,2} = \x5*\y5; \a{6,3} = (\y5)^2; \a{6,4} = \x5; \a{6,5} = \y5; \a{6,6} = 1.0; 
  int \i;
  for \i in {1,...,5}{
    \a{\i,1} = (\x{\i})^2;
    \a{\i,2} = \x{\i} * \y{\i};
    \a{\i,3} = (\y{\i})^2;
    \a{\i,4} = \x{\i};
    \a{\i,5} = \y{\i};
    \a{\i,6} = 1.0;
  };
  % 第 6 行是占位
  for \i in {1,...,6}{
    \a{6,\i} = 0.0;
  };
  \A = cofactor(6,6,1);
  \B = cofactor(6,6,2);
  \C = cofactor(6,6,3);
  \D = cofactor(6,6,4);
  \E = cofactor(6,6,5);
  \F = cofactor(6,6,6);
  show(6,6);
  print{the conic through (\x1,\y1),(\x2,\y2),(\x3,\y3),(\x4,\y4),(\x5,\y5) is:\\$Ax^2+Bxy+Cy^2+Dx+Ey+F=0$, \\wherein\\ A = \A, B = \B, C = \C, D = \D, E = \E, F = \F};
}

\end{document}