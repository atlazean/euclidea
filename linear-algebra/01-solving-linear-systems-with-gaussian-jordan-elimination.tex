\documentclass[tikz,border=10pt]{standalone}
\usepackage{tikz}

\input{../../references/tikzlibrarymc-v1.0.code.tex}

\begin{document}

\tikzmath{
  print{Solving linear systems using Gaussian Jordan elimination:\\};
  % 测试
  int \n;
  real \result;
  \n = 4;
  % 2 -3 1 3
  \a{1,1} = 2; \a{1,2} = 1; \a{1,3} = 3; \a{1,4} = 4; 
  \a{1,5} = 16; 
  \a{2,1} = 1; \a{2,2} = -2; \a{2,3} = 2; \a{2,4} = 3; 
  \a{2,5} = 19; 
  \a{3,1} = 3; \a{3,2} = 4; \a{3,3} = -1; \a{3,4} = 2; 
  \a{3,5} = -1; 
  \a{4,1} = 4; \a{4,2} = 3; \a{4,3} = 2; \a{4,4} = 1;
  \a{4,5} = 4; 
  int \i;
  print{solve 5x1:\\};
  for \i in {1,...,\n}{
    \result = solve(\n,1,\i,1);
    print{\result \\};
  };
  \n = 4;
  \a{1,1} = 2; \a{1,2} = 3; \a{1,3} = 4; \a{1,4} = 5; 
  \a{2,1} = 9; \a{2,2} = 3; \a{2,3} = 1; \a{2,4} = 2; 
  \a{3,1} = 4; \a{3,2} = 7; \a{3,3} = 6; \a{3,4} = 3; 
  \a{4,1} = 5; \a{4,2} = 9; \a{4,3} = 8; \a{4,4} = 7;
  int \i,\j;
  for \i in {1,...,\n}{
    for \j in {\n+1,...,2*\n}{
      if \i == \j - \n then {
        \a{\i,\j} = 1.0;
      } else {
        \a{\i,\j} = 0.0;
      };
    };
  };
  % inverse matrix:
  % [36,24,36,-48]/192
  % [-153,-6,-105,156]/192
  % [161,-10,177,-188]/192
  % [-13,2,-93,76]/192
  print{matrix inverse:\\};
  int \i,\j;
  for \i in {1,...,\n}{
    for \j in {1,...,\n}{
      \result = solve(\n,\n,\i,\j);
      print{\result, \ };
    };
    print{\\};
  };
  print{function inverse:\\};
  int \i,\j;
  for \i in {1,...,\n}{
    for \j in {1,...,\n}{
      \result = inverse(\n,\i,\j);
      print{\result, \ };
    };
    print{\\};
  };
}

\end{document}